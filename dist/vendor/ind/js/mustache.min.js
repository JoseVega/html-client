!function(a,b){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(Mustache))}(this,function(a){var b=Object.prototype.toString,c=Array.isArray||function(a){return"[object Array]"===b.call(a)};function d(a){return"function"==typeof a}function e(a){return c(a)?"array":typeof a}function f(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function g(a,b){return null!=a&&"object"==typeof a&&b in a}var h=RegExp.prototype.test;function i(a,b){return h.call(a,b)}var j=/\S/;function k(a){return!i(j,a)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function m(a){return String(a).replace(/[&<>"'\/]/g,function(a){return l[a]})}var n=/\s*/,o=/\s+/,p=/\s*=/,q=/\s*\}/,r=/#|\^|\/|>|\{|&|=|!/;function s(b,d){if(!b)return[];var e=[],g=[],h=[],i=!1,j=!1;function l(){if(i&&!j)for(;h.length;)delete g[h.pop()];else h=[];i=!1,j=!1}var m,s,w;function x(a){if("string"==typeof a&&(a=a.split(o,2)),!c(a)||2!==a.length)throw new Error("Invalid tags: "+a);m=new RegExp(f(a[0])+"\\s*"),s=new RegExp("\\s*"+f(a[1])),w=new RegExp("\\s*"+f("}"+a[1]))}x(d||a.tags);for(var y,z,A,B,C,D,E=new v(b);!E.eos();){if(y=E.pos,A=E.scanUntil(m))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),k(B)?h.push(g.length):j=!0,g.push(["text",B,y,y+1]),y+=1,"\n"===B&&l();if(!E.scan(m))break;if(i=!0,z=E.scan(r)||"name",E.scan(n),"="===z?(A=E.scanUntil(p),E.scan(p),E.scanUntil(s)):"{"===z?(A=E.scanUntil(w),E.scan(q),E.scanUntil(s),z="&"):A=E.scanUntil(s),!E.scan(s))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],g.push(C),"#"===z||"^"===z)e.push(C);else if("/"===z){if(D=e.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?j=!0:"="===z&&x(A)}if(D=e.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return u(t(g))}function t(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function u(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function v(a){this.string=a,this.tail=a,this.pos=0}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},v.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b};function w(a,b){this.view=a,this.cache={".":this.view},this.parent=b}w.prototype.push=function(a){return new w(a,this)},w.prototype.lookup=function(a){var b,c=this.cache;if(c.hasOwnProperty(a))b=c[a];else{for(var e,f,h=this,i=!1;h;){if(a.indexOf(".")>0)for(b=h.view,e=a.split("."),f=0;null!=b&&f<e.length;)f===e.length-1&&(i=g(b,e[f])),b=b[e[f++]];else b=h.view[a],i=g(h.view,a);if(i)break;h=h.parent}c[a]=b}return d(b)&&(b=b.call(this.view)),b};function x(){this.cache={}}x.prototype.clearCache=function(){this.cache={}},x.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=s(a,b)),d},x.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof w?b:new w(b);return this.renderTokens(d,e,c,a)},x.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;j>i;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},x.prototype.renderSection=function(a,b,e,f){var g=this,h="",i=b.lookup(a[1]);function j(a){return g.render(a,b,e)}if(i){if(c(i))for(var k=0,l=i.length;l>k;++k)h+=this.renderTokens(a[4],b.push(i[k]),e,f);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],b.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(b.view,f.slice(a[3],a[5]),j),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],b,e,f);return h}},x.prototype.renderInverted=function(a,b,d,e){var f=b.lookup(a[1]);return!f||c(f)&&0===f.length?this.renderTokens(a[4],b,d,e):void 0},x.prototype.renderPartial=function(a,b,c){if(c){var e=d(c)?c(a[1]):c[a[1]];return null!=e?this.renderTokens(this.parse(e),b,c,e):void 0}},x.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},x.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},x.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.2.0",a.tags=["{{","}}"];var y=new x;a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,c){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+e(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g},a.escape=m,a.Scanner=v,a.Context=w,a.Writer=x});